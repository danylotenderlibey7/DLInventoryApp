@model List<DLInventoryApp.ViewModels.Admin.UserAdminVm>
@{
    ViewData["Title"] = "Users";
}

<h2>Users</h2>

<form method="post">

    @Html.AntiForgeryToken()

    <div style="margin-bottom:10px;">
        <button type="submit" formaction="@Url.Action("Block", "Admin")">Block</button>
        <button type="submit" formaction="@Url.Action("Unblock", "Admin")">Unblock</button>
        <button type="submit" formaction="@Url.Action("Delete", "Admin")">Delete</button>
        <button type="submit" formaction="@Url.Action("AddAdmin", "Admin")">Add Admin</button>
        <button type="submit" formaction="@Url.Action("RemoveAdmin", "Admin")">Remove Admin</button>
    </div>

    <table border="1" cellpadding="6" cellspacing="0">
        <thead>
            <tr>
                <th>
                    <input type="checkbox" id="selectAll" />
                </th>
                <th>Email</th>
                <th>Email Confirmed</th>
                <th>Blocked</th>
                <th>Role</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in Model)
            {
                <tr>
                    <td>
                        <input type="checkbox" name="userIds" value="@user.Id" class="user-checkbox" />
                    </td>
                    <td>@user.Email</td>
                    <td>@(user.EmailConfirmed ? "True" : "False")</td>
                    <td>@(user.IsBlocked ? "True" : "False")</td>
                    <td>@(user.IsAdmin ? "Admin" : "User")</td>
                </tr>
            }
        </tbody>
    </table>

</form>

<script>
    document.getElementById("selectAll").addEventListener("change", function () {
        const checkboxes = document.querySelectorAll(".user-checkbox");
        checkboxes.forEach(cb => cb.checked = this.checked);
    });
</script>